from scripts import *

from argchoose import ArgChooser
from common.helpers import argument_registry


def build_menu() -> ArgChooser:
    ac = ArgChooser()
    for argument in argument_registry.values():
        ac.add_argument(
            *argument['flags'],
            method=argument['method'],
            help=argument['help'],
            category=argument['category']
        )
    return ac


def main():
    ac = build_menu()
    try:
        ac.execute()
    except KeyboardInterrupt:
        print("Catched keyboard interrupt, closing now!")


if __name__ == "__main__":
    main()
